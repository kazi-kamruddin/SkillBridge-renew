@model SkillBridge.Models.HomePageViewModel

@{
    ViewBag.Title = "SkillBridge";
}

@section Styles {
    <link rel="stylesheet" href="~/Styles/indexHome.css" />
}

<main>
    @if (!Model.IsLoggedIn)
    {
        <!-- ======================= LOGGED OUT VIEW ======================= -->
        <section class="row text-center">
            <h1>Welcome to SkillBridge</h1>
            <p class="lead">A platform to connect, learn, and share skills with others.</p>
            <p>
                <a href="/Account/Login" class="btn btn-primary">Login</a>
                <a href="/Account/Register" class="btn btn-success">Sign Up</a>
            </p>
        </section>

        <hr />

        
    }
    else
    {
        <!-- ======================= LOGGED IN VIEW ======================= -->
        <section>
            <h2>My Skills</h2>
            <ul>
                @foreach (var us in Model.MySkills)
                {
                    <li>
                        <strong>@us.Skill.Name</strong> – Known up to stage @us.KnownUpToStage of @us.Skill.SkillStages.Count
                    </li>
                }
            </ul>
        </section>

        <section>
            <h2>My Latest Post</h2>
            @if (Model.MyLatestPost != null)
            {
                <div class="card p-2 mb-2">
                    <h4>
                        <a href="@Url.Action("PostDetails", "Communities", new { id = Model.MyLatestPost.Id })">
                            @Model.MyLatestPost.Title
                        </a>
                    </h4>
                    <p>@Model.MyLatestPost.Content</p>
                    <small>@Model.MyLatestPost.CreatedAt</small>
                </div>
            }
            else
            {
                <p>You haven’t made a post yet.</p>
            }

            <h3>Someone Else’s Latest Post</h3>
            @if (Model.OtherLatestPost != null)
            {
                <div class="card p-2 mb-2">
                    <h4>
                        <a href="@Url.Action("PostDetails", "Communities", new { id = Model.OtherLatestPost.Id })">
                            @Model.OtherLatestPost.Title
                        </a>
                    </h4>
                    <p>@Model.OtherLatestPost.Content</p>
                    <small>@Model.OtherLatestPost.CreatedAt</small>
                </div>
            }
            else
            {
                <p>No recent posts from others yet.</p>
            }
        </section>


        <section>
            <h2>Latest Interaction</h2>
            @if (Model.LatestInteractionId != null)
            {
                <div class="card p-2 mb-2">
                    <p>With <strong>@Model.LatestInteractionOtherUser</strong></p>
                    <p>Teaching: @Model.LatestInteractionSkillYouTeach</p>
                    <p>Learning: @Model.LatestInteractionSkillYouLearn</p>
                    <p>Status: @Model.LatestInteractionStatus</p>
                    <a href="@Url.Action("Sessions", "Interactions", new { id = Model.LatestInteractionId })" class="btn btn-outline-primary">
                        View Stages
                    </a>
                </div>
            }
            else
            {
                <p>No ongoing interactions yet.</p>
            }
        </section>
    }
</main>
